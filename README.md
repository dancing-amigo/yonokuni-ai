# Yonokuni AI

Yonokuni AI は、4 色チーム戦の完全情報ボードゲームに AlphaZero 系強化学習を適用し、自己対戦によって強力なエージェントを育成するプロジェクトです。実運用の TypeScript ゲームエンジンと、学習用の Python/Gym 環境を厳密に同期させ、学習とサービス提供で同一ルールが動作することを重視しています。

## プロジェクトの目的
- 8×8 盤・4 プレイヤー（赤/青/黄/緑）、2 チーム構成（赤&黄 vs 青&緑）の抽象ゲームに対し、AlphaZero（自己対戦 + MCTS + 方策・価値ネットワーク）を導入する。
- TypeScript 製ゲームエンジン（UI/サーバ）と Python/Gym 学習環境を同一仕様で実装・検証し、実運用と学習パイプラインの整合性を確保する。
- ルール固有の取り方（同色サンド・包囲取り）や死に駒処理、中央 4 マス勝利条件などを厳密に再現し、高度なデータ拡張・評価基盤を備えた学習パイプラインを構築する。

## コア要素
- **TypeScript ゲームエンジン**：UI/サーバから利用される公式ルール実装。移動判定→捕獲→死に駒反映→勝敗判定→手番交代の順序を固定し、合法手ゼロ時のスキップにも対応。
- **Python/Gym 環境**：TS エンジンと同仕様の環境を Gym API で公開し、観測 8 チャンネル + 補助ベクトル、1,792 次元の行動空間を提供。ゴールデンテストで TS との同値性を自動検証。
- **AlphaZero 学習パイプライン**：ResNet ベースの方策・価値ネットワーク、PUCT MCTS、自己対戦データ収集、リプレイバッファ学習、モデルゲーティング、評価基盤を含む統合ワークフロー。

## リポジトリ構成（予定）
- `ts/`：TypeScript 実装（ゲームエンジン・テスト）。
- `python/`：Gym 環境、学習スクリプト、MCTS 実装。
- `docs/` またはルート：本ドキュメント、アーキテクチャ、プラン。
- `tests/`：TS/Python 双方のユニットテストおよび同値性テスト。

## 現状と今後
1. TypeScript エンジンのルール更新（同色サンド、取り順序、スキップなど）と単体テスト整備。
2. Python/Gym 環境の構築とゴールデンテストによる仕様一致確認。
3. AlphaZero パイプライン（MCTS・自己対戦・学習・ゲーティング）の実装と運用設計。
4. ルールベース Bot や旧モデルとの対戦評価、ダッシュボード化、推論高速化。

詳細な実装タスクは `PLAN.md`、アーキテクチャの高レベル整理は `ARCHITECTURE.md` を参照してください。
